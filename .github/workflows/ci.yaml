name: CI

on: push

jobs:
  # lint:
  #   uses: ./.github/workflows/lint.yaml

  # test:
  #   uses: ./.github/workflows/test.yaml

  # deploy_production:
  #   if: contains(github.ref, 'master')
  #   needs: [lint, test]
  #   uses: ./.github/workflows/deploy-production.yaml

  # deploy_dev:
  #   if: contains(github.ref, 'dev')
  #   needs: [lint, test]
  #   uses: ./.github/workflows/deploy-dev.yaml

  # deploy_staging:
  #   if: contains(github.ref, 'staging')
  #   needs: [lint, test]
  #   uses: ./.github/workflows/deploy-staging.yaml

  # this is to test a deployment script
  deploy_test:
    if: contains(github.ref, 'chore/github-actions')
    #needs: [lint, test]
    uses: ./.github/workflows/deploy-dev.yaml
    with:
      test-input: 'test'
    secrets:
      DEPLOYMENT_KEY_DEV: ${{ secrets.DEPLOYMENT_KEY_DEV }}
      HEROKU_APP_NAME_DEV: ${{ secrets.HEROKU_APP_NAME_DEV }}
