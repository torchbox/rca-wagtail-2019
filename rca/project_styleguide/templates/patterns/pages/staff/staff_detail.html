{% extends "patterns/base_page.html" %}
{% load wagtailcore_tags wagtailimages_tags wagtailsettings_tags static %}
{% get_settings %}

{% block body_class %}
    app--staff-detail
{% endblock %}

{% block title_prefix %}
    {% if page.profile_title %}{{ page.profile_title }}{% endif %} {% if page.profile_firstname %}{{ page.profile_firstname }}{% endif %} {% if page.profile_surname %}{{ page.profile_surname }}{% endif %}
{% endblock %}

{% block content %}

    <div class="page page--no-hero" typeof="schema:Person">

        <header class="page__header bg bg--dark">
            <div class="title-area title-area--staff-detail grid">
                {% if page.profile_image %}
                    <div class="title-area__image">
                        {% include "patterns/atoms/profile-image/profile-image.html" %}
                    </div>
                {% endif %}
                <div class="title-area__content">
                    <nav class="title-area__breadcrumb" aria-label="Breadcrumb">
                        {% include "patterns/molecules/breadcrumb/breadcrumb.html" with breadcrumb=page.breadcrumb %}
                    </nav>
                    {% if page.profile_title or profile_firstname or profile_surname %}
                        <h1 property="schema:name" class="title-area__heading heading heading--one">
                            {% if page.profile_title %}
                                <span class="title-area__profile-title heading heading--three">{{ page.profile_title }}</span>
                            {% endif %}
                            {{ page.profile_firstname }}
                            {{ page.profile_surname }}
                        </h1>
                        {% if page.profile_type %}
                            <h2 class="title-area__sub-heading body body--one">{{ page.profile_type }}</h2>
                        {% endif %}
                    {% endif %}

                    {% if page.job_title %}
                        <div class="title-area__job-titles">
                            {% include "patterns/molecules/job-titles/job-titles.html" with job_title=page.job_title %}
                        </div>
                    {% endif %}

                    {% if page.profile_contact_email %}
                        <div class="title-area__contact">
                            <a class="link link--secondary link--link body body--two" href="mailto:{{ page.profile_contact_email }}">
                                <span class="link__label">Email {{ page.profile_contact_email }}</span>
                                <svg width="12" height="8" class="link__icon" aria-hidden="true"><use xlink:href="#arrow"></use></svg>
                            </a>
                        </div>
                    {% endif %}
                </div>
            </div>
        </header>

        <div class="page__content">

            <section class="section bg bg--dark {% if page.gallery %}section--opposite-notch{% endif %}">

                <div class="section__row staff-body">
                    <div class="staff-body__container grid">
                        <div class="staff-body__content">
                            <p class="staff-body__introduction heading heading--five" property="schema:description">
                                {{ page.profile_introduction}}
                            </p>
                            <div class="staff-body__description rich-text">
                                {{ page.profile_body|safe }}
                            </div>
                        </div>
                        <div class="staff-body__key-details">
                            {% include "patterns/molecules/key-details/key-details--staff.html" %}
                        </div>
                    </div>
                </div>

                {% if page.research_highlights %}
                    <div class="section__row research-highlights">
                        <div class="section__header grid">
                            <h2 class="section__heading section__heading--primary heading heading--four">
                                Research highlights
                            </h2>
                        </div>
                        <div class="section__content grid">
                            {% include "patterns/organisms/carousel/carousel.html" with carousel=page.research_highlights modifier='carousel' datatag='data-carousel' %}
                        </div>
                    </div>
                {% endif %}

            {% if page.gallery %} 
                <div class="section__notch section__notch--opposite">
                    <div class="section__notch-fill section__notch-fill--first-col"></div>
                </div>

            </section>

            <section class="section bg bg--light">

                <div class="section__row section__row--first section__row--last">
                    <header class="section__header grid">
                        <h3 class="section__heading section__heading--secondary heading heading--four">
                            Gallery
                        </h3>
                    </header>
                    <div class="section__content">
                        {% include "patterns/organisms/slideshow/slideshow.html" with slideshow=page.gallery modifier='slideshow--author-info' %}
                    </div>
                </div>

            </section>

            <section class="section bg bg--dark">
                <div class="section__notch">
                    <div class="section__notch-fill section__notch-fill--third-col"></div>
                </div>
            {% endif %}

                {% if page.accordion %}
                    <div class="section__row {% if not page.gallery %}staff-detail-accordion staff-detail-accordion--wo-gallery{% endif %} section__row--last">
                        {% include "patterns/organisms/accordion-block/accordion-block.html" with accordion_id='1' accordions=page.accordion title="More about "|add:page.profile_firstname %}
                    </div>
                {% endif %}

                <div class="section__notch">
                    <div class="section__notch-fill section__notch-fill--second-col"></div>
                </div>
            
            </section>
            
            <section class="section section--top-space bg bg--light">
                {% if page.related_students %}
                    {% include "patterns/organisms/student-listing/student-listing.html" with student_listing=page.related_students %}
                {% endif %}

                {% if page.related_links %}
                    {% include "patterns/organisms/related-links/related-links.html" with related_links=page.related_links title="External links" %}
                {% endif %}
            </section>
            
        </div>

    </div>
{% endblock %}
